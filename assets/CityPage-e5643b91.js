import{O as q,E as A,G,y as J}from"./base-ad0068b1.js";/* empty css                  */import{E as R,c as Y,a as Z}from"./el-main-3b59cf7c.js";import{E as B}from"./el-button-7195a193.js";import{E as K}from"./el-input-5051ef1b.js";/* empty css                */import{_ as w,u as M,a0 as V,c as e,g as l,t as I,J as T,d as f,w as p,Y as N,F as y,h as g,e as u,p as x,a1 as j,a2 as P,i as s,r as v,Z as Q,C as z,M as F,T as W,j as L,o as X}from"./index-35cb0dd4.js";import{_ as tt}from"./LoadingMod-b2d8dc0e.js";import"./request-8cf98847.js";import{a as et}from"./city-05b4df96.js";import"./index-06758cc8.js";import"./icon-56d47907.js";import"./index-e90ec287.js";import"./error-f1912ce6.js";import"./size-a5a08e6d.js";const at={__name:"CityItem",props:["city","type"],setup(t){const h=M(),{setLocalInfo:c}=V();function r(n){n.name&&(c(n),h.push("/"))}return(n,_)=>{const k=B;return e(),l(y,null,[t.type==="li"?(e(),l("li",{key:0,onClick:_[0]||(_[0]=m=>r(t.city)),class:"city-li"},I(t.city.name),1)):T("",!0),t.type==="btn"?(e(),f(k,{key:1,onClick:_[1]||(_[1]=m=>r(t.city)),class:"city-btn"},{default:p(()=>[N(I(t.city.name||"未知"),1)]),_:1})):T("",!0)],64)}}},S=w(at,[["__scopeId","data-v-21cc30a3"]]);const st=t=>(j("data-v-eef7a7c1"),t=t(),P(),t),nt={key:0,class:"searchList"},ot={key:1,class:"empty"},it=st(()=>s("span",null,"没有找到匹配的城市",-1)),lt={__name:"SearchList",props:["data"],setup(t){return(h,c)=>{const r=A;return t.data.length?(e(),l("ul",nt,[(e(!0),l(y,null,g(t.data,n=>(e(),f(S,{key:n.cityId,city:n,type:"li"},null,8,["city"]))),128))])):(e(),l("div",ot,[u(r,{size:"100px",color:"#d5d7da"},{default:p(()=>[u(x(q))]),_:1}),it]))}}},ct=w(lt,[["__scopeId","data-v-eef7a7c1"]]);const H=t=>(j("data-v-fca28283"),t=t(),P(),t),rt={class:"jump-bar"},ut=["onClick"],_t={class:"main-top"},dt=H(()=>s("h2",null,"当前城市",-1)),pt={class:"cities"},ft={class:"main-top"},mt=H(()=>s("h2",null,"热门城市",-1)),yt={class:"cities"},vt={__name:"AlphalList",props:["formateData"],setup(t){const{localInfo:h}=V(),c=v(!1),r=v(""),n=v(),_=v();function k(m){r.value=m,c.value=!0,setTimeout(()=>{c.value=!1},800);const $=_.value.querySelector(`#${m}`);n.value.parentNode.scroll(0,$.offsetTop-100)}return(m,$)=>(e(),l(y,null,[s("div",{class:"list-container",ref_key:"cDom",ref:n},[s("div",rt,[(e(!0),l(y,null,g(t.formateData.alpha,(i,o)=>(e(),l("a",{key:o,onClick:Q(a=>k(i.first),["prevent"])},I(i.first),9,ut))),128))]),s("div",_t,[dt,s("div",pt,[u(S,{city:x(h),type:"btn"},null,8,["city"])])]),s("div",ft,[mt,s("div",yt,[(e(!0),l(y,null,g(t.formateData.hot,i=>(e(),f(S,{key:i.cityId,city:i,type:"btn"},null,8,["city"]))),128))])]),s("ul",{ref_key:"listDom",ref:_},[(e(!0),l(y,null,g(t.formateData.alpha,i=>(e(),l("li",{key:i.first,class:"alpha-item"},[s("p",null,I(i.first),1),s("ul",null,[(e(!0),l(y,null,g(i.cities,o=>(e(),f(S,{key:o.cityId,city:o,type:"li"},null,8,["city"]))),128))])]))),128))],512)],512),u(W,{mode:"out-in","leave-active-class":"animate__animated animate__fadeOut"},{default:p(()=>[z(s("div",{class:"tips-box"},I(r.value),513),[[F,c.value]])]),_:1})],64))}},ht=w(vt,[["__scopeId","data-v-fca28283"]]);const kt={class:"header-nav"},Ct={class:"kw-inp"},It={__name:"CityPage",setup(t){const h=M(),c=v([]),r=v(""),n=v(!1),{localInfo:_}=V(),k=L(()=>c.value.length===0),m=L(()=>{const o=[],a=[];return c.value.forEach(d=>{d.isHot&&o.push(d);const C=d.pinyin[0].toUpperCase(),b=a.find(D=>D.first===C);b?b.cities.push(d):a.push({first:C,cities:[d]})}),a.sort((d,C)=>d.first>C.first?1:-1),{hot:o,alpha:a}}),$=L(()=>{const o=r.value.toLowerCase();return c.value.filter(a=>o===""?!1:a.name.includes(o)||a.pinyin.includes(o))});function i(){h.push({path:"/"})}return X(async()=>{const{data:{data:{cities:o},status:a}}=await et();a||(c.value=o)}),(o,a)=>{const d=A,C=K,b=B,D=Y,O=Z,U=R;return e(),f(U,{class:"city-container"},{default:p(()=>[u(D,{class:"city-header"},{default:p(()=>[s("div",kt,[s("h1",null,"当前城市 - "+I(x(_).name||"未知"),1),s("div",{class:"close-btn",onClick:i},[u(d,{size:"30px"},{default:p(()=>[u(x(G))]),_:1})])]),s("div",Ct,[u(C,{style:{border:"none"},"prefix-icon":x(J),modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=E=>r.value=E),modelModifiers:{trim:!0},placeholder:"输入城市名或拼音",onInput:a[1]||(a[1]=E=>n.value=!0),clearable:""},null,8,["prefix-icon","modelValue"]),z(u(b,{onClick:a[2]||(a[2]=E=>n.value=!1),link:"",style:{"margin-left":"15px",color:"#000"}},{default:p(()=>[N("取消")]),_:1},512),[[F,n.value]])])]),_:1}),u(O,{class:"city-body"},{default:p(()=>[n.value?(e(),f(ct,{key:1,data:$.value},null,8,["data"])):(e(),f(ht,{key:0,formateData:m.value},null,8,["formateData"]))]),_:1}),k.value?(e(),f(tt,{key:0,flag:k.value,full:""},null,8,["flag"])):T("",!0)]),_:1})}}},jt=w(It,[["__scopeId","data-v-fcde9abc"]]);export{jt as default};
